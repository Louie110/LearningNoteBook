## 第6章示例代码
包含并行数据增加工具和物体框标注小工具。  
参考本书第6章，或在线版本：
https://zhuanlan.zhihu.com/p/24425116

书中的数据增加小工具使用的是手动均衡，使用Python进程池的自动均衡版本，可以参考 run_augmentation_pool_map.py

本篇将介绍和深度学习数据处理阶段最相关的基础使用，并完成4个有趣实用的小例子：

- 延时摄影小程序
- 视频中截屏采样的小程序
- 图片数据增加（data augmentation）的小工具
- 物体检测框标注小工具

# OpenCV简介
OpenCV 是计算机视觉领域应用最广泛的开源工具包，基于 C/C++，支持 Linux/Windows/MacOS/Android/iOS，并提供了 Python，Matlab 和 Java 等语言的接口，因为其丰富的接口，优秀的性能和商业友好的使用许可，不管是学术界还是业界中都非常受欢迎。OpenCV 最早源于 Intel 公司 1998 年的一个研究项目，当时在 Intel 从事计算机视觉的工程师盖瑞·布拉德斯基(Gary Bradski)访问一些大学和研究组时发现学生之间实现计算机视觉算法用的都是各自实验室里的内部代码或者库，这样新来实验室的学生就能基于前人写的基本函数快速上手进行研究。于是 OpenCV 旨在提供一个用于计算机视觉的科研和商业应用的高性能通用库。 第一个 alpha 版本的 OpenCV 于 2000 年的 CVPR 上发布，在接下来的 $5$ 年里，又陆续发布了 $5$ 个 beta 版本，2006 年发布了第一个正式版。2009 年随着盖瑞加入了 Willow Garage，OpenCV 从 Willow Garage 得到了积极的支持，并发布了 1.1 版。2010 年 OpenCV 发布了 2.0 版本，添加了非常完备的 C++ 接口，从 2.0 开始的版本非常用户非常庞大，至今仍在维护和更新。2015 年 OpenCV 3 正式发布，除了架构的调整，还加入了更多算法，更多性能的优化和更加简洁的 API，另外也加强了对 GPU 的支持，现在已经在许多研究机构和商业公司中应用开来。 

# OpenCV的结构
和 Python 一样，当前的OpenCV也有两个大版本，OpenCV2 和 OpenCV3。相比 OpenCV2，OpenCV3 提供了更强的功能和更多方便的特性。

根据功能和需求的不同，OpenCV中的函数接口大体可以分为如下部分：

- `core`：核心模块，主要包含了 OpenCV 中最基本的结构（矩阵，点线和形状等），以及相关的基础运算/操作。
- `imgproc`：图像处理模块，包含和图像相关的基础功能（滤波，梯度，改变大小等），以及一些衍生的高级功能（图像分割，直方图，形态分析和边缘/直线提取等）。
- `highgui`：提供了用户界面和文件读取的基本函数，比如图像显示窗口的生成和控制，图像/视频文件的IO等。

如果不考虑视频应用，以上三个就是最核心和常用的模块了。针对视频和一些特别的视觉应用，OpenCV 也提供了强劲的支持：

- `video`：用于视频分析的常用功能，比如光流法（Optical Flow）和目标跟踪等。
- `calib3d`：三维重建，立体视觉和相机标定等的相关功能。
- `features2d`：二维特征相关的功能，主要是一些不受专利保护的，商业友好的特征点检测和匹配等功能，比如 ORB 特征。
-` object`：目标检测模块，包含级联分类和Latent SVM
- `ml`：机器学习算法模块，包含一些视觉中最常用的传统机器学习算法。
- `flann`：最近邻算法库，Fast Library for Approximate Nearest Neighbors，用于在多维空间进行聚类和检索，经常和关键点匹配搭配使用。
- `gpu`：包含了一些gpu加速的接口，底层的加速是CUDA实现。
- `photo`：计算摄像学（Computational Photography）相关的接口，当然这只是个名字，其实只有图像修复和降噪而已。
- `stitching`：图像拼接模块，有了它可以自己生成全景照片。
- `nonfree`：受到专利保护的一些算法，其实就是 SIFT 和 SURF。
- `contrib`：一些实验性质的算法，考虑在未来版本中加入的。
- `legacy`：字面是遗产，意思就是废弃的一些接口，保留是考虑到向下兼容。
- `ocl`：利用OpenCL并行加速的一些接口。
- `superres`：超分辨率模块，其实就是 BTV-L1（Biliteral Total Variation – L1 regularization）算法
- `viz`：基础的3D渲染模块，其实底层就是著名的3D工具包VTK（Visualization Toolkit）。

从使用的角度来看，和 OpenCV2 相比，OpenCV3 的主要变化是更多的功能和更细化的模块划分。